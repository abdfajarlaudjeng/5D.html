<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Filter 4D dengan Sidebar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: sans-serif; }
    .sidebar { width: 220px; }
    .content { margin-left: 220px; padding: 1rem; }
  </style>
</head>
<body class="bg-gray-100">

  <!-- Sidebar -->
  <div class="sidebar fixed top-0 left-0 h-full bg-gray-800 text-white p-4">
    <h2 class="text-lg font-bold mb-4">Menu</h2>
    <ul>
      <li class="mb-2"><a href="#" class="hover:underline">Dashboard</a></li>
      <li class="mb-2"><a href="#" class="hover:underline">Filter 4D</a></li>
      <li class="mb-2"><a href="#" class="hover:underline">Data Lain</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="content">
    <h1 class="text-2xl font-bold mb-4">Filter Data 4D</h1>

    <!-- Input Angka Main -->
    <label class="block font-semibold mb-2">Input Angka Main (max 6 digit per baris, 10 baris):</label>
    <textarea id="angkaMain" rows="10" maxlength="60" 
      class="w-full border border-gray-300 p-2 rounded mb-4"
      placeholder="Masukkan angka (contoh: 123456)"
    ></textarea>

    <!-- Filter Shio -->
    <label class="block font-semibold mb-2">Filter Shio:</label>
    <select id="filterShio" class="w-full border border-gray-300 p-2 rounded mb-4">
      <option value="">Semua Shio</option>
      <option value="Tikus">Tikus</option>
      <option value="Kerbau">Kerbau</option>
      <option value="Macan">Macan</option>
      <!-- Tambah shio lainnya -->
    </select>

    <!-- Tombol Proses -->
    <button id="btnProses" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Proses</button>

    <!-- Tabel Hasil -->
    <div class="mt-6 overflow-x-auto">
      <table class="w-full border border-gray-300">
        <thead class="bg-gray-200">
          <tr>
            <th class="border border-gray-300 px-3 py-2">No</th>
            <th class="border border-gray-300 px-3 py-2">Angka 4D</th>
            <th class="border border-gray-300 px-3 py-2">Shio</th>
          </tr>
        </thead>
        <tbody id="tabelHasil"></tbody>
      </table>
    </div>
  </div>

  <script>
    const textarea = document.getElementById("angkaMain");

    textarea.addEventListener("input", () => {
      let lines = textarea.value.split("\n").map(line => {
        // Hanya angka dan maksimal 6 digit per baris
        let angka = line.replace(/\D/g, "").slice(0, 6);
        return angka;
      });

      // Batasi maksimal 10 baris
      if (lines.length > 10) {
        lines = lines.slice(0, 10);
      }

      textarea.value = lines.join("\n");
    });

    document.getElementById("btnProses").addEventListener("click", () => {
      const dataInput = textarea.value.split("\n").filter(l => l.trim() !== "");
      const shioFilter = document.getElementById("filterShio").value;
      
      // Ambil data dari Google Sheet
      fetch("URL_JSON_GOOGLE_SHEET")
        .then(res => res.json())
        .then(data => {
          let hasil = data.filter(item => {
            let cocok = dataInput.includes(item[0]);
            let shioCocok = !shioFilter || item[1] === shioFilter;
            return cocok && shioCocok;
          });

          const tbody = document.getElementById("tabelHasil");
          tbody.innerHTML = "";
          hasil.forEach((row, i) => {
            tbody.innerHTML += `
              <tr>
                <td class="border border-gray-300 px-3 py-2">${i+1}</td>
                <td class="border border-gray-300 px-3 py-2">${row[0]}</td>
                <td class="border border-gray-300 px-3 py-2">${row[1]}</td>
              </tr>
            `;
          });
        });
    });
  </script>

</body>
</html>
