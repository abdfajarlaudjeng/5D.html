<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Validasi Angka 5D</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    textarea, input { width: 100%; padding: 8px; margin: 5px 0; }
    .hasil { margin-top: 10px; padding: 10px; background: #f0f0f0; }
    button { padding: 8px 12px; margin-right: 5px; cursor: pointer; }
</style>
</head>
<body>

<h2>Validasi Angka 5D</h2>

<label>Masukkan Angka 5D (pisahkan dengan * tanpa spasi):</label>
<textarea id="angka5d" rows="4" placeholder="Contoh: 12345*54321*67890"></textarea>

<label>Filter Kepala (digit ke-4):</label>
<input type="text" id="kepala" maxlength="6" placeholder="Maksimal 6 digit angka">

<label>Filter Ekor (digit ke-5):</label>
<input type="text" id="ekor" maxlength="6" placeholder="Maksimal 6 digit angka">

<button onclick="filterAngka()">Validasi</button>
<button onclick="salinHasil()">Salin ke Clipboard</button>

<div class="hasil" id="hasil"></div>

<script>
function filterAngka() {
    let input5d = document.getElementById("angka5d").value.trim();
    let kepalaFilter = document.getElementById("kepala").value.trim();
    let ekorFilter = document.getElementById("ekor").value.trim();
    let hasilDiv = document.getElementById("hasil");

    if (!input5d) {
        hasilDiv.innerHTML = "<b>Masukkan angka 5D terlebih dahulu!</b>";
        return;
    }

    // Pecah angka berdasarkan tanda *
    let angkaArray = input5d.split("*").map(a => a.trim()).filter(a => a.length === 5 && /^\d+$/.test(a));

    // Filter angka sesuai kepala & ekor
    let hasil = angkaArray.filter(angka => {
        let kepala = angka.charAt(3); // digit ke-4 (index 3)
        let ekor = angka.charAt(4);   // digit ke-5 (index 4)
        let cocokKepala = kepalaFilter ? kepalaFilter.includes(kepala) : true;
        let cocokEkor = ekorFilter ? ekorFilter.includes(ekor) : true;
        return cocokKepala && cocokEkor;
    });

    hasilDiv.innerHTML = hasil.length ? 
        `<b>Hasil:</b> ${hasil.join(" * ")}` : 
        "<b>Tidak ada angka yang cocok.</b>";
}

function salinHasil() {
    let hasilText = document.getElementById("hasil").innerText.replace(/^Hasil:\s*/i, "");
    if (!hasilText || hasilText.includes("Tidak ada angka")) {
        alert("Tidak ada hasil yang bisa disalin!");
        return;
    }
    navigator.clipboard.writeText(hasilText).then(() => {
        alert("Hasil berhasil disalin ke clipboard!");
    }).catch(() => {
        alert("Gagal menyalin ke clipboard.");
    });
}
</script>

</body>
</html>
